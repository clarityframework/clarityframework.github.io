<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Open Reading</title>
  <meta name="robots" content="noindex,nofollow" />
  <script>
    (function () {
      // IMPORTANT: set your Worker base URL here
      const WORKER_RESOLVE_BASE = "https://clarity-oid-resolver.gutenbergblog55.workers.dev/api/resolve";

      const params = new URLSearchParams(window.location.search);
      const oid = params.get("oid");

      if (!oid) {
        document.addEventListener("DOMContentLoaded", function () {
          document.body.innerHTML =
            '<div style="font-family:system-ui,-apple-system,Segoe UI,sans-serif;max-width:720px;margin:60px auto;padding:0 20px;line-height:1.6;">' +
            '<h1 style="margin:0 0 10px;">Missing order reference</h1>' +
            '<p style="margin:0 0 16px;">Please open the link from your order confirmation or receipt email.</p>' +
            '</div>';
        });
        return;
      }

      const target = WORKER_RESOLVE_BASE + "?oid=" + encodeURIComponent(oid);
      window.location.replace(target);
    })();
  </script>
</head>
<body>
  Redirecting...
</body>
</html>
